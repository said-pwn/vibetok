# Решение проблем

## Что делать, если "не работает"

### Шаг 1: Откройте консоль браузера
1. Нажмите `F12` или `Ctrl+Shift+I`
2. Перейдите на вкладку **Console**
3. Посмотрите, есть ли ошибки (красным цветом)
4. Скопируйте текст ошибки

### Шаг 2: Проверьте основные проблемы

#### Проблема: "Permission denied" или "Missing or insufficient permissions"
**Решение:**
1. Откройте [Firebase Console](https://console.firebase.google.com/)
2. Выберите ваш проект
3. Перейдите в **Firestore Database** → **Rules**
4. Вставьте правила из файла `firestore.rules`
5. Нажмите **Publish**

#### Проблема: "Failed to fetch" или сетевые ошибки
**Решение:**
1. Проверьте интернет-соединение
2. Проверьте, что Firebase проект активен
3. Проверьте конфигурацию в `src/config/firebase.js`

#### Проблема: Приложение не загружается
**Решение:**
1. Остановите сервер (`Ctrl+C`)
2. Удалите `node_modules` и `package-lock.json`
3. Запустите `npm install`
4. Запустите `npm run dev`

#### Проблема: Видео не отображаются
**Решение:**
- Видео хранятся локально через `URL.createObjectURL`
- После перезагрузки страницы видео могут исчезнуть
- Это нормальное поведение для текущей реализации

#### Проблема: Комментарии не работают
**Решение:**
1. Проверьте, что вы авторизованы
2. Проверьте правила Firestore для коллекции `comments`
3. Проверьте консоль на ошибки

#### Проблема: Реакции на комментарии не работают
**Решение:**
1. Проверьте, что комментарии имеют поле `reactions`
2. Проверьте правила Firestore для обновления комментариев
3. Проверьте консоль на ошибки

#### Проблема: Сообщения не работают
**Решение:**
1. Проверьте, что созданы коллекции `conversations` и `messages`
2. Проверьте правила Firestore для этих коллекций
3. Создайте индексы в Firestore (если требуется)

### Шаг 3: Проверьте Firebase настройки

1. **Authentication:**
   - Откройте Firebase Console → Authentication
   - Убедитесь, что включен провайдер **Email/Password**

2. **Firestore:**
   - Откройте Firebase Console → Firestore Database
   - Убедитесь, что база данных создана
   - Проверьте правила безопасности

3. **Storage (если используется):**
   - Откройте Firebase Console → Storage
   - Убедитесь, что Storage создан
   - Проверьте правила безопасности

### Шаг 4: Проверьте код

1. **Проверьте конфигурацию Firebase:**
   - Откройте `src/config/firebase.js`
   - Убедитесь, что все данные правильные

2. **Проверьте импорты:**
   - Убедитесь, что все файлы существуют
   - Проверьте, что нет ошибок импорта

### Шаг 5: Быстрое решение

Если ничего не помогает, временно используйте открытые правила:

**Firestore:**
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```

**Storage:**
```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read, write: if true;
    }
  }
}
```

⚠️ **ВНИМАНИЕ:** Используйте только для разработки!

### Шаг 6: Перезапуск

1. Остановите сервер разработки
2. Очистите кеш браузера (`Ctrl+Shift+Delete`)
3. Перезапустите сервер (`npm run dev`)
4. Обновите страницу (`Ctrl+F5`)

## Частые ошибки и решения

### Ошибка: "Cannot read property 'id' of undefined"
**Причина:** `userData` не загружен
**Решение:** Проверьте авторизацию и загрузку данных пользователя

### Ошибка: "Failed to get document"
**Причина:** Документ не существует или нет прав доступа
**Решение:** Проверьте правила Firestore и существование документа

### Ошибка: "Index required"
**Причина:** Нужен индекс для запроса
**Решение:** Создайте индекс в Firestore или используйте fallback без сортировки

### Ошибка: "Network request failed"
**Причина:** Проблемы с сетью или Firebase
**Решение:** Проверьте интернет и настройки Firebase

## Получение помощи

Если проблема не решена:
1. Скопируйте текст ошибки из консоли
2. Укажите, какая функция не работает
3. Проверьте, что все шаги выше выполнены

